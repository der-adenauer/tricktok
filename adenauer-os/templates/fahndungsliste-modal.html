<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Fahndungsliste</title>
  <!-- System-CSS einbinden (Pfad ggf. anpassen) -->
  <link rel="stylesheet" href="{{ url_for('static', filename='system.css') }}">
</head>
<body>

<div style="max-width: 600px; margin: 1rem auto; border: 2px solid #000; padding: 1rem; background: #fff;">
  
  <!-- Überschrift -->
  <h2 class="heading">Neuer Link</h2>

  <!-- Formular: Neuer Link eintragen -->
  <!-- "method=post" => passt zu deinem Flask-Handler -->
  <form method="post" style="margin-bottom: 1rem;">
    <div class="field-row" style="margin-bottom: 1rem;">
      <!-- Tooltip-Container -->
      <div class="tooltip" style="width: 100%; display: block;">
        <input 
          type="text" 
          name="eingabe_link" 
          placeholder="TikTok-Kanal-URL" 
          style="width: 100%;"
        >
        <!-- Tooltip-Text -->
        <span class="tooltiptext" style="text-align: left; width: 300px;">
          Es kann immer nur ein Link gesendet werden.<br>
          Nur eine Eingabe alle 10 Sekunden.<br>
          Das Programm erkennt automatisch TikTok-Links.<br>
          Duplikate werden übersprungen.
        </span>
      </div>
    </div>

    <button type="submit" class="btn" style="font-size: 18px; padding: 0.5rem 1rem;">
      Speichern
    </button>
  </form>

  <!-- Fehlermeldung, falls vorhanden -->
  {% if fehlermeldung %}
    <div style="color: red; margin-bottom: 0.5rem;">
      {{ fehlermeldung }}
    </div>
  {% endif %}

  <!-- Gesamtzahl -->
  <p style="margin-top: 1rem; margin-bottom: 0.5rem;">
    <strong>Gesamtzahl:</strong> {{ total_links }}
  </p>

  <!-- Export CSV-Button -->
  <p style="margin-bottom:1rem;">
    <a href="{{ url_for('export_csv') }}" class="btn" style="font-size:18px; padding:0.5rem 1rem;">
      Export CSV
    </a>
  </p>

  <!-- Teilüberschrift -->
  <h3 style="margin-top: 0; margin-bottom: 1rem;">
    Tiktok-Kanal Fahndungsliste
  </h3>

  <!-- Auflistung der Datensätze (4 pro Seite) -->
  <ul class="list-group" style="margin-bottom: 1rem;">
    {% for eintrag in links %}
      <li class="list-group-item">
        {{ eintrag.kanal }} 
        <span style="float:right;">{{ eintrag.zeitstempel }}</span>
      </li>
    {% endfor %}
  </ul>

  <!-- Pagination -->
  <div style="display:flex; justify-content: space-between; margin-top: 1rem;">
    <!-- Zurück-Link nur anzeigen, falls page > 1 -->
    {% if page > 1 %}
      <a href="{{ url_for('fahndungsliste_db', page=page - 1) }}" class="btn">
        Zurück
      </a>
    {% else %}
      <span></span> <!-- Platzhalter für Layout -->
    {% endif %}

    <!-- Weiter-Link => wenn es potenziell mehr Einträge gibt -->
    {% if links|length >= per_page %}
      <a href="{{ url_for('fahndungsliste_db', page=page + 1) }}" class="btn">
        Weiter
      </a>
    {% else %}
      <span></span>
    {% endif %}
  </div>

</div>

</body>
</html>
